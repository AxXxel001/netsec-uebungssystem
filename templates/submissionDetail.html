{%include ../../templates/header.html %}

<h1>Abgabe {{ submission.id }}</h1>
Von <a href="/student/{{ submission.student_id }}">Student {{ submission.student_id }}</a>
f√ºr <a href="/sheet/{{ submission.sheet_id }}">Blatt {{ submission.sheet_id }}</a>,
abgegeben {{ submission.time }}

<h2>Dateien</h2>

<table>
  <tr>
    <th>Datei-ID</th>
    <th>Hash</th>
    <th>Name</th>
  </tr>
  {% for file in files %}
  <tr>
    <td>{{ file.id }}</td>
    <td>{{ file.hash }}</td>
    <td>
      <a href="/download/{{ file.hash }}">{{ file.filename }}</a>
    </td>
  </tr>
  {% end %}
</table>

<h2>Korrektur</h2>

<form action="/submission/{{ submission.id }}/grade_all" method="post">
{% module xsrf_form_html() %}
<table>
<thead><tr><th>Aufgabe</th><th>Kommentar</th><th>Punktzahl</th><th>Korrektor</th></tr></thead>
<tbody>
{% for grade in grading %}
<tr>
  <th>{{ grade["task"].name }}</th>
  <td>
    <textarea name="comment_{{ grade["task"].id }}" placeholder="Kommentar" cols="100" rows="4">{% if grade["grading"] %}{{ grade["grading"].comment }}{% end %}</textarea>
  </td>
  <td>
    <input type="number" name="points_{{ grade["task"].id }}" value="{% if grade["grading"] %}{{ float(grade["grading"].decipoints) / 10 }}{% end %}" step="0.5">
     von {{ (float(grade["task"].decipoints) / 10) }}
  </td>
  <td>
    {% if grade["grading"] %}
    {{ grade["grading"].grader }}
    {% end %}
</td>
</tr>
{% end %}
</tbody></table>

<button role="submit">Korrigieren</button>
</form>

{%include ../../templates/footer.html %}
